<!DOCTYPE html>
<html>
<head>
<title>Virtual Queue</title>
<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
	<script src="../../js/jquery/jquery-2.1.4.min.js" type="text/javascript"></script>
	<script src="../../js/jquery/jquery.serializejson.js"	type="text/javascript"></script>
	<script src="../../js/jquery/jquery.dynatable.js" type="text/javascript"></script>
	<link href="../../css/jquery.dynatable.css" rel="stylesheet" media="screen">
</head>
<body style="background-color: #F0F0F0">
<div id="header"></div>
<div class="container">
<div><h2>Lista de Produtos</h2><br></div>
<div>
<table id="my-table" class="table table-hover">
  <thead>
  	<tr>
  		<th style="color: #000000;">Id</th>
    	<th>Nome</th>
    	<th>Descricao</th>
    	<th>Tipo</th>
    	<th>Preco</th>
  	</tr>
  </thead>
  <tbody>
  </tbody>
</table>
</div>
</div>
<div id="footer"></div>
<script>
p = new Object();
p.id = 201;
p.nome = "Teste";
p.descricao = "Teste";
p.preco = 100;
p.quantidade = 1;
p.tipo = "TESTE";

$.ajax({
  url: '/VirtualQueue/VQ/produto/list',
  success: function(data){
    $('#my-table').dynatable({
      dataset: {
        records: data
      }
    });
  }
});
function deletarProduto(){
	swal({   
		title: "",   
		text: "Deseja realmente deletar este produto?\n (esta ação não poderá ser desfeita)",   
		type: "",   
		showCancelButton: true,
		confirmButtonColor: "#337ab7",   
		confirmButtonText: "Sim",   
		cancelButtonText: "Não",   
		closeOnConfirm: false,   
		closeOnCancel: true }, 
		function(isConfirm){   
			if (isConfirm) {
				$.ajax({
				     type: "POST",
				     url: "http://localhost:8080/VirtualQueue/VQ/produto/deleta",
				     data: JSON.stringify(p),
				     contentType: "application/json; charset=utf-8",
				     dataType: "json",
				     processData: true,
				     success: function (vdata, status, jqXHR) {
				    	 swal("","Produto deletado!")	
				     },
				     error: function (xhr) {
				         alert("Erro" + xhr.responseText);
				     }
			});
	}});
}

$(document).ready(function(){
	$("#header").load('menu.html');
	$("#footer").load('footer.html');
});
</script>
</body>
</html>